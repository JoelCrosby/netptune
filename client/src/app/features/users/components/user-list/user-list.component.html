<div class="app-list mb-5">
  @for (user of users$ | async; track user.id) {
  <app-user-list-item [user]="user">
    <button
      class="app-list-item-action"
      cdkDragHandle
      mat-icon-button
      aria-label="more"
      matTooltip="click for more options. click and hold to drag task"
      [matTooltipShowDelay]="1200"
      [matMenuTriggerData]="{ user: user }"
      [matMenuTriggerFor]="menu"
    >
      <mat-icon class="app-list-drag-icon"> drag_indicator </mat-icon>
    </button>

    <mat-menu #menu="matMenu">
      <ng-template matMenuContent>
        @if (!user.isWorkspaceOwner) {
        <button mat-menu-item (click)="onRemoveClicked(user)">
          <mat-icon class="material-icons-outlined"> delete </mat-icon>
          <span>Remove user from workspace</span>
        </button>
        }
      </ng-template>
    </mat-menu>
  </app-user-list-item>
  }
</div>
